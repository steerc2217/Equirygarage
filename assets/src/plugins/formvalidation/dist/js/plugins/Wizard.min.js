!function(t,e){typeof exports==='object'&&typeof module!=='undefined'?module.exports=e():typeof define==='function'&&define.amd?define(e):(t=t||self, (t.FormValidation=t.FormValidation||{}, t.FormValidation.plugins=t.FormValidation.plugins||{}, t.FormValidation.plugins.Wizard=e()))}(this,(function(){"use strict";function t(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value" in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}function n(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}function r(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):(t[e]=n);return t}function o(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&p(t,e)}function i(t){i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return i(t)}function p(t,e){p=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return p(t,e)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function s(t,e){if(e&&(typeof e==="object"||typeof e==="function")){return e}return u(t)}var c=FormValidation.Plugin,l=FormValidation.utils.classSet,a=FormValidation.plugins.Excluded,S=function(e){o(p,e);function p(e){var n;t(this,p);n=s(this,i(p).call(this,e));n.currentStep=0;n.numSteps=0;n.opts=Object.assign({},{activeStepClass:'fv-plugins-wizard--active',onStepActive:function(){},onStepInvalid:function(){},onStepValid:function(){},onValid:function(){},stepClass:'fv-plugins-wizard--step'},e);n.prevStepHandler=n.onClickPrev.bind(u(n));n.nextStepHandler=n.onClickNext.bind(u(n));return n}n(p,[{key:"install",value:function(){var t=this;this.core.registerPlugin(p.EXCLUDED_PLUGIN,new a);var e=this.core.getFormElement();this.steps=[].slice.call(e.querySelectorAll(this.opts.stepSelector));this.numSteps=this.steps.length;this.steps.forEach(function(e){l(e,r({},t.opts.stepClass,!0))});l(this.steps[0],r({},this.opts.activeStepClass,!0));this.prevButton=e.querySelector(this.opts.prevButton);this.nextButton=e.querySelector(this.opts.nextButton);this.prevButton.addEventListener('click',this.prevStepHandler);this.nextButton.addEventListener('click',this.nextStepHandler)}},{key:"uninstall",value:function(){this.core.deregisterPlugin(p.EXCLUDED_PLUGIN);this.prevButton.removeEventListener('click',this.prevStepHandler);this.nextButton.removeEventListener('click',this.nextStepHandler)}},{key:"getCurrentStep",value:function(){return this.currentStep}},{key:"goToPrevStep",value:function(){this.currentStep>=1&&(l(this.steps[this.currentStep],r({},this.opts.activeStepClass,!1)),this.currentStep--,l(this.steps[this.currentStep],r({},this.opts.activeStepClass,!0)),this.onStepActive())}},{key:"goToNextStep",value:function(){var t=this;this.core.validate().then(function(e){if(e==='Valid'){var n=t.currentStep+1;n>=t.numSteps?(t.currentStep=t.numSteps-1):(l(t.steps[t.currentStep],r({},t.opts.activeStepClass,!1)),t.currentStep=n,l(t.steps[t.currentStep],r({},t.opts.activeStepClass,!0)));t.onStepActive();t.onStepValid();n===t.numSteps&&t.onValid()}else e==='Invalid'&&t.onStepInvalid()})}},{key:"onClickPrev",value:function(){this.goToPrevStep()}},{key:"onClickNext",value:function(){this.goToNextStep()}},{key:"onStepActive",value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit('plugins.wizard.step.active',t);this.opts.onStepActive(t)}},{key:"onStepValid",value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit('plugins.wizard.step.valid',t);this.opts.onStepValid(t)}},{key:"onStepInvalid",value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit('plugins.wizard.step.invalid',t);this.opts.onStepInvalid(t)}},{key:"onValid",value:function(){var t={numSteps:this.numSteps};this.core.emit('plugins.wizard.valid',t);this.opts.onValid(t)}}]);return p}(c);S.EXCLUDED_PLUGIN='___wizardExcluded';return S}))